<html>
<head>
<link rel="import" href="fileHandler/fileImporter.html">
</head>
<body>
<h1>Welcome!</h1>
<h1>Give the directory of an existing project</h1>
<div id="drop_zone">
<input type="file" id="files" name="files[]" multiple mozdirectory="" webkitdirectory="" directory=""/>
</div>
<script>
  		function handleFileSelect(evt) {
			evt.stopPropagation();
			evt.preventDefault();
			var eventData = evt.dataTransfer || evt.target;
			var files = eventData.files; // FileList object; // FileList object.
			// files is a FileList of File objects. List some properties.
			var output = [];
			for (var i = 0, f; f = files[i]; i++) {
				if (f.name == '.dgrproj') {
					file = new AbstractedFile(f);
					file.readFileAsLines(function(fileReader) {
						firstLine = fileReader.readLine();
						secondLine = fileReader.readLine();
						alert(firstLine);
						alert(secondLine);
						document.getElementById('existingName').value = firstLine;
						document.getElementById('directory').value = secondLine;
					});
					console.log(f);
					break;
				}
			}
		}

		function handleDragOver(evt) {
			evt.stopPropagation();
			evt.preventDefault();
			evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
		}

	  	// Setup the dnd listeners.
		var dropZone = document.getElementById('drop_zone');
		dropZone.addEventListener('dragover', handleDragOver, false);
		dropZone.addEventListener('drop', handleFileSelect, false);
		document.getElementById('files').addEventListener('change', handleFileSelect, false);
	</script>
<form action ="loadProject" method="post" >
	<input id = "directory" type ="text" value = "" name = "directory" hidden>
	<input id = "existingName" type ="text" value = "" name = "name" hidden>
	<input type="submit" value="Submit">
</form>
<form action = "newProject" method="post">
	<h1>Or make a new project</h1>
	<input id = "newName" type ="text" name = "name" placeholder = "Project Name">
	<input type="submit" value="Submit">
</form>
</body>
</html>